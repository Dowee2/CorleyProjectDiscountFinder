<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MainWindow.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Sample-Code-Coverage-Project</a> &gt; <a href="index.source.html" class="el_package">edu.westga.cs3211.discountFinder.view.codebehind</a> &gt; <span class="el_source">MainWindow.java</span></div><h1>MainWindow.java</h1><pre class="source lang-java linenums">package edu.westga.cs3211.discountFinder.view.codebehind;

import edu.westga.cs3211.discountFinder.model.Category;
import edu.westga.cs3211.discountFinder.model.DiscountFinder;
import edu.westga.cs3211.discountFinder.model.DistanceEnum;
import edu.westga.cs3211.discountFinder.model.Filter;
import edu.westga.cs3211.discountFinder.model.Item;
import javafx.beans.property.SimpleListProperty;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.scene.control.Button;
import javafx.scene.control.ComboBox;
import javafx.scene.control.ListView;
import javafx.scene.control.TextField;

/**
 * MainWindow code behind
 * @author Team 1
 */
<span class="nc" id="L22">public class MainWindow {</span>
	@FXML
    private Button addItemFilterButton;

    @FXML
    private Button clearFiltersList;

    @FXML
    private TextField filterItemByTextField;

    @FXML
    private ListView&lt;Item&gt; itemsListView;

    @FXML
    private Button favoriteSellerButton;

    @FXML
    private Button addDisplayFilterButton;

    @FXML
    private TextField filterBySellerTextField;

    @FXML
    private TextField filterByDistanceTextField;


    @FXML
    private ComboBox&lt;Category&gt; categoriesCombobox;

    @FXML
    private ComboBox&lt;DistanceEnum&gt; distanceFromComboBox;
	
	private DiscountFinder finder;



    private void initializeListView() {
		// this.itemsListView.itemsProperty().bind(new SimpleListProperty&lt;Item&gt;(FXCollections.observableArrayList(this.finder.getItems())));
<span class="nc" id="L60">		ObservableList&lt;Item&gt; filtered = new SimpleListProperty&lt;Item&gt;(FXCollections.observableArrayList(this.finder.getItems()));</span>
<span class="nc" id="L61">		this.itemsListView.itemsProperty().setValue(filtered);</span>
<span class="nc" id="L62">	}</span>


	@FXML
    void handleFindItemButton(ActionEvent event) {
<span class="nc bnc" id="L67" title="All 2 branches missed.">		if (this.filterItemByTextField.getText().isEmpty()) {</span>
<span class="nc" id="L68">			this.initializeListView();</span>
<span class="nc" id="L69">		} else {</span>
<span class="nc" id="L70">			ObservableList&lt;Item&gt; filtered = new SimpleListProperty&lt;Item&gt;(FXCollections.observableArrayList(Filter.filterByName(this.finder.getItems(), this.filterItemByTextField.getText())));</span>
            
<span class="nc" id="L72">			this.itemsListView.itemsProperty().setValue(filtered);</span>
		}
<span class="nc" id="L74">    }</span>

	@FXML
    void handleClearButton(ActionEvent event) {
<span class="nc" id="L78">		this.itemsListView.itemsProperty().setValue(new SimpleListProperty&lt;Item&gt;(FXCollections.observableArrayList(this.finder.getItems())));</span>
<span class="nc" id="L79">    }</span>

	@FXML
    void onFavoriteSeller(ActionEvent event) {
<span class="nc bnc" id="L83" title="All 2 branches missed.">        if (this.itemsListView.getSelectionModel().getSelectedItem() != null) {</span>
            
<span class="nc" id="L85">            this.itemsListView.getSelectionModel().getSelectedItem().getSeller().setFavorite();</span>
<span class="nc" id="L86">            this.initializeListView();</span>
        }
        
<span class="nc" id="L89">    }</span>

    @FXML
    void handleDisplaySellerButton(ActionEvent event) {
<span class="nc bnc" id="L93" title="All 2 branches missed.">        if (this.filterBySellerTextField.getText().isEmpty()) {</span>
<span class="nc" id="L94">			this.initializeListView();</span>
<span class="nc" id="L95">		} else {</span>
<span class="nc" id="L96">			ObservableList&lt;Item&gt; filtered = new SimpleListProperty&lt;Item&gt;(FXCollections.observableArrayList(Filter.filterBySeller(this.finder.getItems(), this.filterBySellerTextField.getText())));</span>
            
<span class="nc" id="L98">			this.itemsListView.itemsProperty().setValue(filtered);</span>
		} 
<span class="nc" id="L100">    }</span>

    private void setupListenerForDistanceCombobox() {

<span class="nc" id="L104">        this.distanceFromComboBox.getSelectionModel().selectedItemProperty().addListener((observable, oldDistance, newDistance) -&gt; {</span>
<span class="nc bnc" id="L105" title="All 2 branches missed.">            if (newDistance != null) {</span>
<span class="nc" id="L106">                ObservableList&lt;Item&gt; filtered = new SimpleListProperty&lt;Item&gt;(FXCollections.observableArrayList(Filter.filterByDistance(this.finder.getItems(), newDistance)));</span>
<span class="nc" id="L107">                this.itemsListView.itemsProperty().setValue(filtered);</span>
<span class="nc bnc" id="L108" title="All 2 branches missed.">            } else if (oldDistance == null) {</span>
<span class="nc" id="L109">                this.initializeListView();</span>
            }
<span class="nc" id="L111">        });</span>
<span class="nc" id="L112">    }</span>
/*
*/
    private void setupListenerForListSelect() {
<span class="nc" id="L116">        this.itemsListView.getSelectionModel().selectedItemProperty().addListener((observable, oldSelect, newSelect) -&gt; {</span>
<span class="nc bnc" id="L117" title="All 2 branches missed.">            if (newSelect != null) {</span>
<span class="nc" id="L118">                this.filterItemByTextField.setText(newSelect.getName());</span>
<span class="nc" id="L119">                this.filterBySellerTextField.setText(newSelect.getSeller().getSellerName());</span>
            }
<span class="nc" id="L121">        });</span>
<span class="nc" id="L122">    }</span>

	private void populateComboBox() {
<span class="nc bnc" id="L125" title="All 2 branches missed.">        for (Category category : Category.values()) {</span>
<span class="nc" id="L126">            this.categoriesCombobox.getItems().add(category);</span>
        }

<span class="nc bnc" id="L129" title="All 2 branches missed.">        for (DistanceEnum distanceEnum : DistanceEnum.values()) {</span>
<span class="nc" id="L130">            this.distanceFromComboBox.getItems().add(distanceEnum);</span>
        }
<span class="nc" id="L132">	}</span>

    private void setupListenerForCategoriesCombobox() {

<span class="nc" id="L136">        this.categoriesCombobox.getSelectionModel().selectedItemProperty().addListener((observable, oldCategory, newCategory) -&gt; {</span>
<span class="nc bnc" id="L137" title="All 2 branches missed.">            if (newCategory != null) {</span>
<span class="nc" id="L138">                ObservableList&lt;Item&gt; filtered = new SimpleListProperty&lt;Item&gt;(FXCollections.observableArrayList(Filter.filterByCategory(this.finder.getItems(), newCategory)));</span>
<span class="nc" id="L139">                this.itemsListView.itemsProperty().setValue(filtered);</span>
<span class="nc bnc" id="L140" title="All 2 branches missed.">            } else if (oldCategory == null) {</span>
<span class="nc" id="L141">                this.initializeListView();</span>
            }
<span class="nc" id="L143">        });</span>
<span class="nc" id="L144">    }</span>

    /**
     * Initializes Webpage
     */
    @FXML
	public void initialize() {
<span class="nc" id="L151">		this.finder = new DiscountFinder();</span>
<span class="nc" id="L152">		this.initializeListView();</span>
<span class="nc" id="L153">		this.populateComboBox();</span>
<span class="nc" id="L154">        this.setupListenerForCategoriesCombobox();</span>
<span class="nc" id="L155">        this.setupListenerForDistanceCombobox();</span>

<span class="nc" id="L157">        this.setupListenerForListSelect();</span>
<span class="nc" id="L158">	}</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>